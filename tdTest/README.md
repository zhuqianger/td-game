# 塔防游戏网络模块测试项目

这个测试项目包含了塔防游戏网络模块的纯逻辑测试，可以在不依赖Unity环境的情况下进行单元测试。

## 项目结构

- `GameClientLogic.cs` - 纯逻辑的GameClient类，模拟网络连接和消息处理
- `GameClientTestLogic.cs` - 纯逻辑的测试类，提供测试接口
- `UnitTest1.cs` - 具体的测试用例

## 主要特性

### GameClientLogic
- 单例模式实现
- 模拟网络连接状态管理
- 消息处理器注册和管理
- JSON消息序列化
- 模拟网络延迟

### GameClientTestLogic
- 连接测试
- 消息发送测试
- 消息接收模拟
- 测试日志记录
- 状态重置功能

## 测试用例

1. **基础功能测试**
   - 单例模式验证
   - 初始连接状态
   - 服务器配置

2. **连接测试**
   - 连接服务器
   - 断开连接
   - 连接状态检查

3. **消息测试**
   - 发送字符串消息
   - 发送JSON消息
   - 自定义消息ID
   - 消息处理器

4. **边界情况测试**
   - 未连接时发送消息
   - 多条消息发送
   - 状态重置

## 运行测试

### 方法1：使用批处理文件
```bash
run_tests.bat
```

### 方法2：使用命令行
```bash
cd tdTest
dotnet test
```

### 方法3：使用Visual Studio
- 打开 `tdTest.sln`
- 在测试资源管理器中运行测试

## 测试数据

测试使用以下默认配置：
- 服务器IP: 127.0.0.1
- 服务器端口: 8888
- 测试用户名: testuser
- 测试密码: testpass

## 注意事项

1. 这些测试不依赖真实的网络连接
2. 所有网络操作都是模拟的
3. 测试可以独立运行，不依赖Unity环境
4. 使用异步/等待模式处理网络操作

## 扩展测试

要添加新的测试用例，可以在 `UnitTest1.cs` 中添加新的测试方法，或者创建新的测试类。每个测试方法都应该使用 `[Test]` 特性标记。
